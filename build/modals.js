(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const t=window.wp.i18n,n=window.wp.domReady;var s=e.n(n);const r=window.wp.element,o=window.wp.components,i=window.wp.apiFetch;var a=e.n(i);function l(e){if("object"==typeof GatherPress)return e.split(".").reduce(((e,t)=>e&&e[t]),GatherPress)}const c=window.ReactJSXRuntime,d=()=>{const[n,s]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[u,g]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),[b,f]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),[_,C]=(0,r.useState)(""),y=(0,r.useRef)(null),v=()=>s(!1);return(0,r.useEffect)((()=>{i?(f(!0),p(!1),g(!1),x(!1)):f(!1),j(!(i||h||u||m))}),[i,h,u,m]),((e,t="")=>{for(const[n,s]of Object.entries(e)){let e=n;t&&(e+="_"+String(t)),addEventListener(e,(e=>{s(e.detail)}),!1)}})({setOpen:s}),(0,r.useEffect)((()=>{n&&y.current&&y.current.focus()}),[n]),(0,c.jsx)(c.Fragment,{children:n&&(0,c.jsxs)(o.Modal,{title:(0,t.__)("Notify members via email","gatherpress"),onRequestClose:v,shouldCloseOnClickOutside:!1,children:[(0,c.jsx)(o.TextareaControl,{label:(0,t.__)("Optional message","gatherpress"),value:_,focus:!0,onChange:e=>C(e),ref:y}),(0,c.jsx)("p",{className:"description",children:(0,t.__)("Select the recipients for your message by checking the relevant boxes.","gatherpress")}),(0,c.jsxs)(o.Flex,{gap:"8",children:[(0,c.jsx)(o.FlexItem,{children:(0,c.jsx)(o.CheckboxControl,{label:(0,t._x)("All Members","Email recipient group option","gatherpress"),checked:i,onChange:d})}),(0,c.jsx)(o.FlexItem,{children:(0,c.jsx)(o.CheckboxControl,{label:(0,t._x)("Attending","Email recipient group option","gatherpress"),checked:h,onChange:p,disabled:b})}),(0,c.jsx)(o.FlexItem,{children:(0,c.jsx)(o.CheckboxControl,{label:(0,t._x)("Waiting List","Email recipient group option","gatherpress"),checked:u,onChange:g,disabled:b})}),(0,c.jsx)(o.FlexItem,{children:(0,c.jsx)(o.CheckboxControl,{label:(0,t._x)("Not Attending","Email recipient group option","gatherpress"),checked:m,onChange:x,disabled:b})})]}),(0,c.jsx)("br",{}),(0,c.jsx)(o.Button,{variant:"primary",onClick:()=>{e.g.confirm((0,t.__)("Confirm you are ready to send?","gatherpress"))&&a()({path:l("urls.eventApiPath")+"/email",method:"POST",data:{post_id:l("eventDetails.postId"),message:_,send:{all:i,attending:h,waiting_list:u,not_attending:m},_wpnonce:l("misc.nonce")}}).then((e=>{e.success&&(v(),C(""),d(!1),p(!1),g(!1),x(!1))}))},disabled:w,children:(0,t._x)("Send Email","Email submission button text","gatherpress")})]})})};s()((()=>{const e=document.getElementById("gatherpress-event-communication-modal");e&&(0,r.createRoot)(e).render((0,c.jsx)(d,{}))}))})();