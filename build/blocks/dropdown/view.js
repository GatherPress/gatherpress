import*as e from"@wordpress/interactivity";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const r=(n={getElement:()=>e.getElement,store:()=>e.store},o={},t.d(o,n),o);var n,o;const{actions:s}=(0,r.store)("gatherpress",{actions:{preventDefault(e){e&&e.preventDefault()},linkHandler(e){s.preventDefault(e);const t=(0,r.getElement)(),n=t.ref.closest(".wp-block-gatherpress-dropdown");if(n&&"select"===n.dataset.dropdownMode){const e=n.querySelector(".wp-block-gatherpress-dropdown__menu"),r=n.querySelector(".wp-block-gatherpress-dropdown__trigger"),o=t.ref.closest(".wp-block-gatherpress-dropdown-item");if(o){const t=o.querySelector("a");if(t&&t.classList.contains("gatherpress--is-disabled"))return;t&&(t.classList.add("gatherpress--is-disabled"),t.setAttribute("tabindex","-1"),t.setAttribute("aira-disabled","true")),e.querySelectorAll(".wp-block-gatherpress-dropdown-item").forEach((e=>{const t=e.querySelector("a");t&&e!==o&&(t.classList.remove("gatherpress--is-disabled"),t.removeAttribute("tabindex"),t.removeAttribute("aria-disabled"))})),r&&t&&(r.textContent=t.textContent.trim()),e&&(e.classList.remove("gatherpress--is-visible"),r.setAttribute("aria-expanded","false"),r.focus())}}},toggleDropdown(e=null,n=null,o=!1){s.preventDefault(e);const l=(n=null!=n?n:(0,r.getElement)()).ref.parentElement.querySelector(".wp-block-gatherpress-dropdown__menu"),a=n.ref.parentElement.querySelector(".wp-block-gatherpress-dropdown__trigger");if(!l||!a)return;let i=!1;o?l.classList.remove("gatherpress--is-visible"):i=l.classList.toggle("gatherpress--is-visible"),a.setAttribute("aria-expanded",i?"true":"false");const c=[a,...l.querySelectorAll(["a[href]:not(.gatherpress--is-disabled)"].join(","))];i?(a.focus(),"function"==typeof n.ref.cleanupFocusTrap&&n.ref.cleanupFocusTrap(),n.ref.cleanupFocusTrap=function(e){if(!e||0===e.length)return()=>{};const r=e.filter((e=>null!==e.offsetParent&&"hidden"!==t.g.window.getComputedStyle(e).visibility&&"0"!==t.g.window.getComputedStyle(e).opacity));if(0===r.length)return()=>{};const n=r[0],o=r[r.length-1],s=e=>{"Tab"===e.key&&(e.shiftKey&&t.g.document.activeElement===n?(e.preventDefault(),o.focus()):e.shiftKey||t.g.document.activeElement!==o||(e.preventDefault(),n.focus()))},l=e=>{"Escape"===e.key&&a()},a=()=>{t.g.document.removeEventListener("keydown",s),t.g.document.removeEventListener("keydown",l)};return t.g.document.addEventListener("keydown",s),t.g.document.addEventListener("keydown",l),a}(c),"function"==typeof n.ref.cleanupCloseHandlers&&n.ref.cleanupCloseHandlers(),n.ref.cleanupCloseHandlers=function(e,r,n){const o=e=>{e.classList.remove("gatherpress--is-visible"),n()},s=r=>{"Escape"===r.key&&t.g.document.querySelectorAll(`${e}.gatherpress--is-visible`).forEach((e=>o(e)))},l=r=>{t.g.document.querySelectorAll(`${e}.gatherpress--is-visible`).forEach((e=>{e.parentElement.contains(r.target)||o(e)}))};return t.g.document.addEventListener("keydown",s),t.g.document.addEventListener("click",l),()=>{t.g.document.removeEventListener("keydown",s),t.g.document.removeEventListener("click",l)}}(".wp-block-gatherpress-dropdown__menu",0,(()=>{"function"==typeof n.ref.cleanupFocusTrap&&n.ref.cleanupFocusTrap(),s.toggleDropdown(null,n,!0)}))):("function"==typeof n.ref.cleanupFocusTrap&&n.ref.cleanupFocusTrap(),"function"==typeof n.ref.cleanupCloseHandlers&&n.ref.cleanupCloseHandlers(),a.focus())}}});