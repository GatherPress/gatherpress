(()=>{"use strict";var e,t={6572:()=>{const e=window.wp.blocks,t=window.wp.blockEditor,s=window.wp.data,n=window.wp.element,r=window.wp.i18n,o=[["core/group",{style:{spacing:{blockGap:0}},metadata:{name:(0,r._x)("RSVP User Info","Block name displayed in the editor","gatherpress")}},[["core/avatar",{isLink:!0,align:"center"}],["core/comment-author-name",{metadata:{name:(0,r._x)("Display Name","Block name displayed in the editor","gatherpress")},textAlign:"center",style:{spacing:{margin:{top:"0",bottom:"0"}}},fontSize:"medium"}],["gatherpress/rsvp-guest-count-display",{align:"center",style:{spacing:{margin:{top:"0",bottom:"0"}}},fontSize:"small"}]]]],i=window.ReactJSXRuntime,l=({response:e,blocks:s,activeRsvpId:n,setActiveRsvpId:r,firstRsvpId:l})=>{const{children:a,...d}=(0,t.useInnerBlocksProps)({},{template:o});return(0,i.jsxs)("div",{...d,children:[e.commentId===(n||l)?a:null,(0,i.jsx)(c,{blocks:s,commentId:e.commentId,setActiveRsvpId:r,isHidden:e.commentId===(n||l)})]})},c=(0,n.memo)((({blocks:e,commentId:s,setActiveRsvpId:n,isHidden:r})=>{const o=(0,t.__experimentalUseBlockPreview)({blocks:e}),l=()=>{n(s)},c={display:r?"none":void 0};return(0,i.jsx)("div",{...o,tabIndex:0,role:"button",style:c,onClick:l,onKeyUp:l})})),a=({responses:e,blocks:s,blockProps:n,activeRsvpId:r,setActiveRsvpId:o,firstRsvpId:c})=>(0,i.jsx)(i.Fragment,{children:e&&e.map((({commentId:e,...a},d)=>{const p=parseInt(e,10);return(0,i.jsx)(t.BlockContextProvider,{value:{commentId:p<0?null:p},children:(0,i.jsx)(l,{response:{commentId:p,...a},blockProps:n,blocks:s,activeRsvpId:r,setActiveRsvpId:o,firstRsvpId:c})},p||d)}))});(0,e.registerBlockType)("gatherpress/rsvp-template",{edit:({clientId:e,context:r})=>{var o,l,c,d;const p=(0,t.useBlockProps)(),v=null!==(o=r?.["gatherpress/rsvpResponses"])&&void 0!==o?o:null,m=null!==(l=r?.["gatherpress/rsvpLimitEnabled"])&&void 0!==l&&l,u=null!==(c=r?.["gatherpress/rsvpLimit"])&&void 0!==c?c:8,[g,I]=(0,n.useState)(null!==(d=parseInt(v?.attending?.records?.[0]?.commentId,10))&&void 0!==d?d:null),{blocks:k}=(0,s.useSelect)((s=>{const{getBlocks:n}=s(t.store);return{blocks:n(e)}}),[e]);let b=[{commentId:-1}];return v?.attending?.records?.length&&(b=v.attending.records,m&&(b=b.slice(0,u))),(0,i.jsx)(a,{responses:b,blockProps:p,blocks:k,activeRsvpId:g,setActiveRsvpId:I,firstRsvpId:b[0]?.commentId})},save:()=>(0,i.jsx)(t.InnerBlocks.Content,{})})}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var o=s[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,s,r,o)=>{if(!s){var i=1/0;for(d=0;d<e.length;d++){for(var[s,r,o]=e[d],l=!0,c=0;c<s.length;c++)(!1&o||i>=o)&&Object.keys(n.O).every((e=>n.O[e](s[c])))?s.splice(c--,1):(l=!1,o<i&&(i=o));if(l){e.splice(d--,1);var a=r();void 0!==a&&(t=a)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,r,o]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={687:0,967:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var r,o,[i,l,c]=s,a=0;if(i.some((t=>0!==e[t]))){for(r in l)n.o(l,r)&&(n.m[r]=l[r]);if(c)var d=c(n)}for(t&&t(s);a<i.length;a++)o=i[a],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},s=globalThis.webpackChunkgatherpress=globalThis.webpackChunkgatherpress||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var r=n.O(void 0,[967],(()=>n(6572)));r=n.O(r)})();